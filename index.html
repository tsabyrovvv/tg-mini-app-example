<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–æ–∏ –¥–∞–Ω–Ω—ã–µ</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--tg-theme-bg-color, #ffffff);
            color: var(--tg-theme-text-color, #000000);
            min-height: 100vh;
            padding-bottom: 80px;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            padding: 16px;
        }

        .header {
            text-align: center;
            margin-bottom: 24px;
            padding: 20px 0;
            background: var(--tg-theme-secondary-bg-color, #f0f0f0);
            border-radius: 12px;
        }

        .header h1 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .header p {
            font-size: 14px;
            opacity: 0.7;
        }

        .avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            margin: 0 auto 16px;
            background: var(--tg-theme-button-color, #007bff);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            color: var(--tg-theme-button-text-color, #ffffff);
            overflow: hidden;
            position: relative;
        }

        .avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 50%;
        }

        .avatar-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .data-card {
            background: var(--tg-theme-secondary-bg-color, #f8f9fa);
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            border: 1px solid var(--tg-theme-hint-color, #e0e0e0);
        }

        .data-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid var(--tg-theme-hint-color, #e0e0e0);
        }

        .data-row:last-child {
            border-bottom: none;
        }

        .data-label {
            font-weight: 500;
            font-size: 14px;
            opacity: 0.8;
        }

        .data-value {
            font-weight: 600;
            font-size: 14px;
            text-align: right;
            max-width: 200px;
            word-break: break-word;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        .stat-card {
            background: var(--tg-theme-secondary-bg-color, #f8f9fa);
            border-radius: 8px;
            padding: 12px;
            text-align: center;
            border: 1px solid var(--tg-theme-hint-color, #e0e0e0);
        }

        .stat-value {
            font-size: 20px;
            font-weight: bold;
            color: var(--tg-theme-button-color, #007bff);
            display: block;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.7;
            margin-top: 4px;
        }

        .action-button {
            background: var(--tg-theme-button-color, #007bff);
            color: var(--tg-theme-button-text-color, #ffffff);
            border: none;
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            width: 100%;
            margin-bottom: 8px;
            transition: opacity 0.2s;
        }

        .action-button:hover {
            opacity: 0.8;
        }

        .action-button:active {
            opacity: 0.6;
        }

        .settings-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--tg-theme-hint-color, #e0e0e0);
            cursor: pointer;
        }

        .settings-item:last-child {
            border-bottom: none;
        }

        .settings-icon {
            width: 24px;
            height: 24px;
            margin-right: 12px;
            background: var(--tg-theme-button-color, #007bff);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: white;
        }

        .settings-content {
            flex: 1;
        }

        .settings-title {
            font-weight: 500;
            font-size: 14px;
        }

        .settings-description {
            font-size: 12px;
            opacity: 0.6;
            margin-top: 2px;
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--tg-theme-bg-color, #ffffff);
            border-top: 1px solid var(--tg-theme-hint-color, #e0e0e0);
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 4px 12px;
            border-radius: 8px;
            transition: background-color 0.2s;
            min-width: 60px;
        }

        .nav-item:hover {
            background: var(--tg-theme-secondary-bg-color, #f0f0f0);
        }

        .nav-item.active {
            background: var(--tg-theme-secondary-bg-color, #f0f0f0);
        }

        .nav-icon {
            width: 24px;
            height: 24px;
            margin-bottom: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .nav-label {
            font-size: 10px;
            font-weight: 500;
            text-align: center;
        }

        .loading {
            text-align: center;
            padding: 40px 0;
            opacity: 0.6;
        }

        .error {
            background: #ffebee;
            color: #c62828;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            margin-bottom: 16px;
        }

        .status {
            padding: 12px;
            text-align: center;
            background: var(--tg-theme-secondary-bg-color, #f0f0f0);
            border-radius: 8px;
            font-size: 12px;
            opacity: 0.7;
            margin-top: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –ü—Ä–æ—Ñ–∏–ª—å -->
        <div id="profile-tab" class="tab-content active">
            <div class="header">
                <div class="avatar" id="avatar">
                    <div class="avatar-placeholder" id="avatarPlaceholder">üë§</div>
                    <img id="avatarImg" style="display: none;" alt="Avatar">
                </div>
                <h1 id="username">–ú–æ–∏ –¥–∞–Ω–Ω—ã–µ</h1>
                <p>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∞—à–µ–º –ø—Ä–æ—Ñ–∏–ª–µ</p>
            </div>

            <div id="loading" class="loading">
                –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö...
            </div>

            <div id="error" class="error" style="display: none;">
                –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
            </div>

            <div id="userData" style="display: none;">
                <div class="data-card">
                    <div class="data-row">
                        <span class="data-label">ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</span>
                        <span class="data-value" id="userId">-</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">–ò–º—è</span>
                        <span class="data-value" id="firstName">-</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">–§–∞–º–∏–ª–∏—è</span>
                        <span class="data-value" id="lastName">-</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Username</span>
                        <span class="data-value" id="userUsername">-</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">–Ø–∑—ã–∫</span>
                        <span class="data-value" id="languageCode">-</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">Premium</span>
                        <span class="data-value" id="isPremium">-</span>
                    </div>
                </div>

                <div class="data-card">
                    <div class="data-row">
                        <span class="data-label">–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞</span>
                        <span class="data-value" id="platform">-</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">–í–µ—Ä—Å–∏—è</span>
                        <span class="data-value" id="version">-</span>
                    </div>
                    <div class="data-row">
                        <span class="data-label">–¢–µ–º–∞</span>
                        <span class="data-value" id="colorScheme">-</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
        <div id="stats-tab" class="tab-content">
            <div class="header">
                <h1>üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</h1>
                <p>–í–∞—à–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</p>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <span class="stat-value" id="visitCount">1</span>
                    <span class="stat-label">–ü–æ—Å–µ—â–µ–Ω–∏–π</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="daysSinceJoin">-</span>
                    <span class="stat-label">–î–Ω–µ–π –≤ Telegram</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="currentTime">--:--</span>
                    <span class="stat-label">–¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è</span>
                </div>
                <div class="stat-card">
                    <span class="stat-value" id="sessionTime">00:00</span>
                    <span class="stat-label">–í—Ä–µ–º–µ–Ω–∏ –≤ —Å–µ—Å—Å–∏–∏</span>
                </div>
            </div>

            <div class="data-card">
                <button class="action-button" onclick="shareApp()">
                    üì§ –ü–æ–¥–µ–ª–∏—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
                </button>
                <button class="action-button" onclick="showAlert()">
                    üîî –ü–æ–∫–∞–∑–∞—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
                </button>
                <button class="action-button" onclick="vibrate()">
                    üì≥ –í–∏–±—Ä–∞—Ü–∏—è
                </button>
            </div>
        </div>

        <!-- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ -->
        <div id="settings-tab" class="tab-content">
            <div class="header">
                <h1>‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏</h1>
                <p>–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</p>
            </div>

            <div class="data-card">
                <div class="settings-item" onclick="toggleTheme()">
                    <div class="settings-icon">üé®</div>
                    <div class="settings-content">
                        <div class="settings-title">–¢–µ–º–∞ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è</div>
                        <div class="settings-description">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ü–≤–µ—Ç–æ–≤—É—é —Å—Ö–µ–º—É</div>
                    </div>
                </div>
                
                <div class="settings-item" onclick="copyUserId()">
                    <div class="settings-icon">üìã</div>
                    <div class="settings-content">
                        <div class="settings-title">–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å ID</div>
                        <div class="settings-description">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –≤–∞—à ID –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞</div>
                    </div>
                </div>

                <div class="settings-item" onclick="clearData()">
                    <div class="settings-icon">üóëÔ∏è</div>
                    <div class="settings-content">
                        <div class="settings-title">–û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ</div>
                        <div class="settings-description">–°–±—Ä–æ—Å–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É</div>
                    </div>
                </div>

                <div class="settings-item" onclick="showAppInfo()">
                    <div class="settings-icon">‚ÑπÔ∏è</div>
                    <div class="settings-content">
                        <div class="settings-title">–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</div>
                        <div class="settings-description">–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–µ—Ä—Å–∏–∏</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="status" id="status">
            –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–±–æ—Ç–µ
        </div>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('profile')">
            <div class="nav-icon">üë§</div>
            <div class="nav-label">–ü—Ä–æ—Ñ–∏–ª—å</div>
        </div>
        <div class="nav-item" onclick="switchTab('stats')">
            <div class="nav-icon">üìä</div>
            <div class="nav-label">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
        </div>
        <div class="nav-item" onclick="switchTab('settings')">
            <div class="nav-icon">‚öôÔ∏è</div>
            <div class="nav-label">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</div>
        </div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        let currentUser = null;
        let sessionStartTime = Date.now();

        function initApp() {
            try {
                tg.expand();
                tg.enableClosingConfirmation();

                const user = tg.initDataUnsafe?.user;
                
                if (user) {
                    currentUser = user;
                    displayUserData(user);
                    loadUserPhoto(user.id);
                    updateVisitCount();
                } else {
                    showError("–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã");
                }

                displayPlatformData();
                updateStats();
                tg.ready();

                document.getElementById('status').textContent = '–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ';

                // –û–±–Ω–æ–≤–ª—è–µ–º –≤—Ä–µ–º—è –∫–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É
                setInterval(updateTime, 1000);
                setInterval(updateSessionTime, 1000);

            } catch (error) {
                console.error('–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
                showError("–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è");
            }
        }

        function displayUserData(user) {
            const avatarPlaceholder = document.getElementById('avatarPlaceholder');
            const username = document.getElementById('username');

            if (user.first_name) {
                avatarPlaceholder.textContent = user.first_name.charAt(0).toUpperCase();
                username.textContent = user.first_name;
            }

            document.getElementById('userId').textContent = user.id || '-';
            document.getElementById('firstName').textContent = user.first_name || '-';
            document.getElementById('lastName').textContent = user.last_name || '-';
            document.getElementById('userUsername').textContent = user.username ? '@' + user.username : '-';
            document.getElementById('languageCode').textContent = user.language_code || '-';
            document.getElementById('isPremium').textContent = user.is_premium ? '–î–∞ ‚≠ê' : '–ù–µ—Ç';

            document.getElementById('loading').style.display = 'none';
            document.getElementById('userData').style.display = 'block';
        }

        function loadUserPhoto(userId) {
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã –±—ã–ª –∑–∞–ø—Ä–æ—Å –∫ API Telegram –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ñ–æ—Ç–æ
            // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–≥–ª—É—à–∫—É
            const avatarImg = document.getElementById('avatarImg');
            const placeholder = document.getElementById('avatarPlaceholder');
            
            // –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–≤–∞—Ç–∞—Ä —á–µ—Ä–µ–∑ API (–≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –Ω—É–∂–µ–Ω —Ç–æ–∫–µ–Ω –±–æ—Ç–∞)
            // const photoUrl = `https://api.telegram.org/bot<TOKEN>/getUserProfilePhotos?user_id=${userId}`;
            
            // –ü—Ä–∏–º–µ—Ä —Å —Å–ª—É—á–∞–π–Ω—ã–º –∞–≤–∞—Ç–∞—Ä–æ–º –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
            const demoAvatars = [
                'https://i.pravatar.cc/160?u=' + userId,
                'https://robohash.org/' + userId + '?set=set1&size=160x160'
            ];
            
            const randomAvatar = demoAvatars[Math.floor(Math.random() * demoAvatars.length)];
            
            avatarImg.src = randomAvatar;
            avatarImg.onload = function() {
                placeholder.style.display = 'none';
                avatarImg.style.display = 'block';
            };
            
            avatarImg.onerror = function() {
                // –ï—Å–ª–∏ –Ω–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å, –æ—Å—Ç–∞–≤–ª—è–µ–º –∑–∞–≥–ª—É—à–∫—É
                console.log('–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –∞–≤–∞—Ç–∞—Ä');
            };
        }

        function displayPlatformData() {
            document.getElementById('platform').textContent = tg.platform || '-';
            document.getElementById('version').textContent = tg.version || '-';
            document.getElementById('colorScheme').textContent = tg.colorScheme || '-';
        }

        function updateStats() {
            const visitCount = getVisitCount();
            document.getElementById('visitCount').textContent = visitCount;
            
            if (currentUser && currentUser.id) {
                // –ü—Ä–∏–º–µ—Ä–Ω—ã–π —Ä–∞—Å—á–µ—Ç –¥–Ω–µ–π —Å –º–æ–º–µ–Ω—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–∞ (—É—Å–ª–æ–≤–Ω–æ)
                const daysSinceJoin = Math.floor(Math.abs(Date.now() - (currentUser.id * 1000)) / (1000 * 60 * 60 * 24));
                document.getElementById('daysSinceJoin').textContent = daysSinceJoin > 10000 ? '1000+' : daysSinceJoin;
            }
        }

        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ru-RU', {hour: '2-digit', minute: '2-digit'});
            document.getElementById('currentTime').textContent = timeString;
        }

        function updateSessionTime() {
            const elapsed = Math.floor((Date.now() - sessionStartTime) / 1000);
            const minutes = Math.floor(elapsed / 60);
            const seconds = elapsed % 60;
            document.getElementById('sessionTime').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function getVisitCount() {
            let count = localStorage.getItem('visitCount') || 0;
            return parseInt(count);
        }

        function updateVisitCount() {
            let count = getVisitCount() + 1;
            localStorage.setItem('visitCount', count);
            return count;
        }

        function switchTab(tabName) {
            // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ —Ç–∞–±—ã
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–∞–±
            document.getElementById(tabName + '-tab').classList.add('active');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => item.classList.remove('active'));
            event.currentTarget.classList.add('active');
        }

        function shareApp() {
            if (tg.platform !== 'unknown') {
                tg.shareUrl('https://t.me/your_bot_name/your_app', '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ!');
            } else {
                alert('–§—É–Ω–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ Telegram');
            }
        }

        function showAlert() {
            if (tg.platform !== 'unknown') {
                tg.showAlert('–≠—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏–∑ Mini App! üéâ');
            } else {
                alert('–≠—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∏–∑ Mini App! üéâ');
            }
        }

        function vibrate() {
            if (tg.platform !== 'unknown') {
                tg.HapticFeedback.impactOccurred('medium');
            } else if (navigator.vibrate) {
                navigator.vibrate(200);
            } else {
                alert('–í–∏–±—Ä–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è');
            }
        }

        function toggleTheme() {
            tg.showConfirm('–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è?', (result) => {
                if (result) {
                    // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª–∞ –±—ã —Å–º–µ–Ω–∞ —Ç–µ–º—ã
                    tg.showAlert('–¢–µ–º–∞ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∞ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ');
                }
            });
        }

        function copyUserId() {
            if (currentUser && currentUser.id) {
                navigator.clipboard.writeText(currentUser.id.toString()).then(() => {
                    tg.showAlert('ID —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞');
                }).catch(() => {
                    tg.showAlert('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å ID');
                });
            }
        }

        function clearData() {
            tg.showConfirm('–û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –ª–æ–∫–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ?', (result) => {
                if (result) {
                    localStorage.clear();
                    sessionStartTime = Date.now();
                    updateStats();
                    tg.showAlert('–î–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã');
                }
            });
        }

        function showAppInfo() {
            tg.showAlert('Mini App v1.0\n–°–æ–∑–¥–∞–Ω–æ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π Telegram Web App API');
        }

        function showError(message) {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('error').style.display = 'block';
            document.getElementById('error').textContent = message;
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        if (window.Telegram && window.Telegram.WebApp) {
            initApp();
        } else {
            // –î–µ–º–æ-—Ä–µ–∂–∏–º
            setTimeout(() => {
                const demoUser = {
                    id: 123456789,
                    first_name: "–ò–≤–∞–Ω",
                    last_name: "–ò–≤–∞–Ω–æ–≤",
                    username: "ivan_demo",
                    language_code: "ru",
                    is_premium: false
                };
                currentUser = demoUser;
                displayUserData(demoUser);
                loadUserPhoto(demoUser.id);
                document.getElementById('platform').textContent = 'Demo';
                document.getElementById('version').textContent = '7.0';
                document.getElementById('colorScheme').textContent = 'light';
                document.getElementById('status').textContent = '–î–µ–º–æ-—Ä–µ–∂–∏–º (–æ—Ç–∫—Ä–æ–π—Ç–µ –≤ Telegram)';
                updateStats();
                updateTime();
                setInterval(updateTime, 1000);
                setInterval(updateSessionTime, 1000);
            }, 1000);
        }
    </script>
</body>
</html>